# Spec: Flat Exploration Strategy

## ADDED Requirements

### Requirement: Independent Random Sampling
The framework MUST support a "Flat" exploration strategy where each test case is generated by independently sampling all quantifiers, ensuring the effective sample size for each quantifier matches the total number of tests run.

#### Scenario: Deep Scenario Diversity
Given a scenario with 3 integer quantifiers `a, b, c` (depth 3)
And a sample budget of 1000
When executed with Flat Exploration
Then `a` should take approximately 1000 distinct values (collisions permitted)
And `b` should take approximately 1000 distinct values
And `c` should take approximately 1000 distinct values
(Contrast with NestedLoop which would only test ~10 distinct values each)

#### Scenario: Magic Value Detection
Given a scenario with 3 integer quantifiers `a, b, c`
And a property that fails if `a === 123456`
And a domain large enough to include 123456
When executed with Flat Exploration and sufficient budget
Then the property should fail (with high probability)
(Contrast with NestedLoop which likely misses the magic value due to small pools)

### Requirement: API Configuration
The `FluentStrategyFactory` MUST provide a method to enable Flat/Random exploration.

#### Scenario: Configuration
Given a strategy factory
When `withRandomExploration()` is called
Then the factory produces a `FlatExplorer` (or equivalent) instead of `NestedLoopExplorer`

### Requirement: Feature Parity
The `FlatExplorer` MUST support all core FluentCheck features including preconditions, `given` clauses, and property evaluation.

#### Scenario: Preconditions
Given a scenario with `forall('a', integer()).given('b', ...).when(...).then(...)`
And a precondition `pre(a > 0)`
When executed with Flat Exploration
Then test cases satisfying `a > 0` should be evaluated
And test cases failing `a > 0` should be skipped/discarded
And the budget should account for skipped tests appropriately
